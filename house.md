
# 租房系统api开发文档

##  house对象

### 根据房源id展示房源信息，每一处房源对应  1+套 房子，每一套房子对应 1+ 房子（房源信息需要包含放该房源在套房与房子的统计信息）

`GET http://www.hushuang.site:8080/backend/landlord/show-house-resouce`

####  json结构
```分散型房源的返回示例``` 
```json
{
  "errno": 0,      //访问接口成功的标志，api进入业务流程标志
  "errmsg": "ok",  
  "data": {      //响应业务数据
    "id": 1,           //套房id，套房是归属房源id的
    "resource_id": 1,  //房源id，一个房源id对应 1+ 套套房
    "cost_ids": "1,2,3", //此套房的费用id集合
    "house_type": "0", //房屋户型信息，3,2,2 表示3室2厅1卫。值得注意的是后面可以依次拓展，3,2,2,1..',
    "door_num": 12, //表示栋房源的的房子的门牌号，能够在已知的某一栋楼中找到某一套房子
    "house_fasility": [1,2,6],//房源设施id集合。例如  1,2,3,4,5
    "orientation": "朝北",//套房朝向
    "house_space": 125, //空间大小，单位平方米
    "floor_num": "6,5", //'具体楼层 例如   6,3  表示总共6层在第三层',
    "area": "很偏的地方",// '区域分组',
    "img_ids": "1,2,6,9", //'套房图片集合 1,2,3 如此便可在图片集合中获取三张图片',
    "remark": "不错的地方啊", //备注
    "disperse_type": 1, //'分散房源的类型分类。0：整租类型，1：合租类型',
    "rent": "3", //整租租金，默认未0，表示不存在
    "pay_way": "1,3", //整租，压几付几  例如   1,3 表示压一付三'，默认未0，表示不存在。
    "roomInfos": [   //套房具备的房子信息集合，不管是啥房源类型，它总是由套房集合组成，而套房又是由房子集合组成
      {
        "id": "1",  //房子id
        "house_info_id": "1",  //套房id
        "room_num": "3", //门牌号里面的套房里面的具体的某一间房子的编号
        "cost_ids": "1,3", //'分摊费用集合',
        "room_name": "哆啦A梦", //单间名字
        "room_type": "主卧", //房子类型，后期可能会变成0，1，2，3这样的拓展，比如1代表主卧。
        "pay_way": "1,3", // '压几付几  例如   1,3 表示压一付三',
        "sex": "0", //性别
        "purpose": "工作",//房子用途
        "house_fasility": [1,2,5],//单间房子的设备，此设备集合应总是套房的子集
        "room_space": "12", //房子空间
        "rent": "888" //租金
      }
    ]
  }
}
```
#### 参数说明
   |参数|类型|必须|说明|
   |:---|---|---|---|
   |house_id|string|是|房源id|


### 根据房东uid展示房源列表
#### 若房源为整栋类型，则提供的是套级别的统计信息，若房源是分散型则提供的是房子级别的统计信息
`GET http://www.hushuang.site:8080/backend/landlord/house-resouce-list`

####  json结构

```json
{
  "errno": 0,
  "errmsg": "ok",
  "data": [
    {
      "id": "1",   //房源主键id
      "uid": "111222", //房东uid
      "names": "保利时代", //房源名称
      "address": "北京首都", //房源地址
      "resource_type": "0", //房源类型，0：整栋类型，1：分散类型
      "house_info":{
            "count":"100", //整栋房源下的套房统计信息，总共100套。当然如果是分散类型，则此处为100间房子的意思
            "already_token":20,    //租出去了20套。当然如果为分散房源类型，则此处为租出去了20间房子
            "not_rent_out":80      //未租的还有80套。当然如果为分散房源类型，则此处为未租出去的房子为80间
      }    
    }
  ]
}
```

#### 参数说明
   |参数|类型|必须|说明|
   |:---|---|---|---|
   |house_id|string|是|房源id|

### 房东创建自己的房源
#### 在创建房源的时候有两种类型，1.整栋房源，2.分散房源.创建所需要的参数暂表示为json格式，（方便理解）可理解成实际开发过程中的post表单提交，表单中数据按json字符串中的层级分布就行了
`POST http://www.hushuang.site:8080/backend/landlord/create-house-resouce`

####  传参json结构


```json
{
      "uid": "111222", //房东uid
      "names": "保利时代", //房源名称
      "address": "北京首都", //房源地址
      "resource_type": "0", //房源类型，0：整栋类型，1：分散类型
      "ridgepole":{ //若非整栋房源则此属性为空
          "street_address": "街道地址", //街道地址
          "floor_introduce": "楼层介绍", //楼层介绍
          "elevator_status": "0", //每一套房里面有几间房子
          "floor_sum": "9", //楼层总数
          "house_num": "10", //每一层有多少套房子
          "room_num": "4" //每一套房里面有几间房子
      },
      "house_info":{
                 "cost_ids":[  //此套房的独有费用集合
                       {
                            "names":"", //费用名称
                            "cost_type":"",//费用类型
                            "cost_way":"",//收费方式，比如现金，支付宝，微信等'
                            "charge_mode":"",//计费方式，每种计费方式对应一个计费公式，0：正常计费模式，1：阶梯计费模式
                            "cost_data":"",//[[0,2,3],[2,5,6],[5,8,8]] 的json用于计算公式的计算数据，json字符串格式，如此便能存储阶段计费数据和正常计费数据.[0,2,3] 表示0-2阶梯收费值为3。 也可以直接为3，表示固定收费
                            "cost_unit":"",//费用单位，仅仅用于展示信息，不参与计算公式。0：:度；1：立方米；2：吨；3：元
                            "min":"",//费用最低值。吨/度/立方 (不足'最低值'按'最低值'收)
                            "period":"",//收费周期
                            "time":""//收费时间,每个月的几号收钱
                       }
                 ], 
                 "apportion" :  [  //此房间的分摊费用集合
                       {
                            "names":"", //费用名称
                            "cost_type":"",//费用类型
                            "cost_way":"",//收费方式，比如现金，支付宝，微信等'
                            "charge_mode":"",//计费方式，每种计费方式对应一个计费公式，0：正常计费模式，1：阶梯计费模式
                            "cost_data":"",//[[0,2,3],[2,5,6],[5,8,8]] 的json用于计算公式的计算数据，json字符串格式，如此便能存储阶段计费数据和正常计费数据.[0,2,3] 表示0-2阶梯收费值为3。 也可以直接为3，表示固定收费
                            "cost_unit":"",//费用单位，仅仅用于展示信息，不参与计算公式。0：:度；1：立方米；2：吨；3：元
                            "min":"",//费用最低值。吨/度/立方 (不足'最低值'按'最低值'收)
                            "period":"",//收费周期
                            "time":""//收费时间,每个月的几号收钱
                       }
                 ],                   
                 "house_type": "0", //房屋户型信息，3,2,2 表示3室2厅1卫。值得注意的是后面可以依次拓展，3,2,2,1..',
                 "door_num": 12, //表示栋房源的的房子的门牌号，能够在已知的某一栋楼中找到某一套房子
                 "house_fasility": [1,2,6],//房源设施id集合。例如  1,2,3,4,5
                 "orientation": "朝北",//套房朝向
                 "house_space": 125, //空间大小，单位平方米
                 "floor_num": "6,5", //'具体楼层 例如   6,3  表示总共6层在第三层',
                 "area": "很偏的地方",// '区域分组',
                 "img_ids": "",//你只需要将套房图片的input的name属性的值取为: house_info[room_infos][img_dis][] . 当然若无，则此值可为空
                 "remark": "不错的地方啊", //备注
                 "disperse_type": 1, //'分散房源的类型分类。0：整租类型，1：合租类型',
                 "rent": "3", //整租租金，默认未0，表示不存在
                 "pay_way": "1,3", //整租，压几付几  例如   1,3 表示压一付三'，默认未0，表示不存在。
                 "roomInfos": [   //套房具备的房子信息集合，不管是啥房源类型，它总是由套房集合组成，而套房又是由房子集合组成
                   {
                     "room_num": "3", //门牌号里面的套房里面的具体的某一间房子的编号
                     "cost_ids":[  //此房间的独有费用集合
                           {
                                "names":"", //费用名称
                                "cost_type":"",//费用类型
                                "cost_way":"",//收费方式，比如现金，支付宝，微信等'
                                "charge_mode":"",//计费方式，每种计费方式对应一个计费公式，0：正常计费模式，1：阶梯计费模式
                                "cost_data":"",//[[0,2,3],[2,5,6],[5,8,8]] 的json用于计算公式的计算数据，json字符串格式，如此便能存储阶段计费数据和正常计费数据.[0,2,3] 表示0-2阶梯收费值为3。 也可以直接为3，表示固定收费
                                "cost_unit":"",//费用单位，仅仅用于展示信息，不参与计算公式。0：:度；1：立方米；2：吨；3：元
                                "min":"",//费用最低值。吨/度/立方 (不足'最低值'按'最低值'收)
                                "period":"",//收费周期
                                "time":""//收费时间,每个月的几号收钱
                           }
                     ], 
                     "apportion" :  [  //此房间的分摊费用集合
                           {
                                "names":"", //费用名称
                                "cost_type":"",//费用类型
                                "cost_way":"",//收费方式，比如现金，支付宝，微信等'
                                "charge_mode":"",//计费方式，每种计费方式对应一个计费公式，0：正常计费模式，1：阶梯计费模式
                                "cost_data":"",//[[0,2,3],[2,5,6],[5,8,8]] 的json用于计算公式的计算数据，json字符串格式，如此便能存储阶段计费数据和正常计费数据.[0,2,3] 表示0-2阶梯收费值为3。 也可以直接为3，表示固定收费
                                "cost_unit":"",//费用单位，仅仅用于展示信息，不参与计算公式。0：:度；1：立方米；2：吨；3：元
                                "min":"",//费用最低值。吨/度/立方 (不足'最低值'按'最低值'收)
                                "period":"",//收费周期
                                "time":""//收费时间,每个月的几号收钱
                           }
                     ],     
                     "room_name": "哆啦A梦", //单间名字
                     "room_type": "主卧", //房子类型，后期可能会变成0，1，2，3这样的拓展，比如1代表主卧。
                     "pay_way": "1,3", // '压几付几  例如   1,3 表示压一付三',
                     "sex": "0", //性别
                     "purpose": "工作",//房子用途
                     "house_fasility": [1,2,5],//单间房子的设备，此设备集合应总是套房的子集
                     "room_space": "12", //房子空间
                     "rent": "888", //租金
                     "img_ids": ""//你只需要将套房图片的input的name属性的值取为: house_info[room_infos][img_dis][] . 当然若无，则此值可为空
                   }                
                 ]
      }    
}

```

####  返回值json结构

```json
{
  "errno": 0,
  "errmsg": "ok",
  "data": true //创建成功
}
```


#### 参数说明
   |参数|类型|必须|说明|
   |:---|---|---|---|
   |```|```|是|```|


### 创建房源所需要的设施表（电冰箱，洗衣机等设施的选择）

`GET http://www.hushuang.site:8080/backend/landlord/fasility-info`

####  json结构
```分散型房源的返回示例``` 
```json
{
  "errno": 0,      //访问接口成功的标志，api进入业务流程标志
  "errmsg": "ok",  
  "data": [
            {
              "id": "1",
              "names": "空调"
            },
            {
              "id": "2",
              "names": "洗衣机"
            },
            {
              "id": "3",
              "names": "电冰箱"
            }
          ]
}
```
#### 参数说明
   |参数|类型|必须|说明|
   |:---|---|---|---|
   |type|string|否|设施类型|
